/*!
 afreeca.js v0.6
 AfreecaTv common library 2019-07-24 
*/
define("afreeca",["atv","jquery","doT"],function(atv,jquery,doT){return atv.$=jquery,atv.inArray=function(a,b){return atv.contains(b,a)},atv.extend({checkPm:function(a){var b=+new Date/1e3,c=!1;return this.getJson("http://www.afreecatv.com/data/pminfo.json?n="+ +new Date,function(a){a.start<=b&&b<=a.end&&(c=!0)}),c}}),atv.extend({isLogin:function(){var a=this,b=a.getCookie("PdboxTicket");return!atv.contains(["",null,!1],b)}}),atv.extend({isLoginAllow:function(a,b){var c=this,d=c.getCookie("PdboxTicket");if(""==d||null==d)return!1;var e=!1;return $.ajaxSettings.traditional=!0,$.ajax({type:"GET",url:MEMBER_8111+"/app/session_allow.php",data:{},async:!1,dataType:"json",xhrFields:{withCredentials:!0},beforeSend:function(a){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8")},success:function(a){e=1==a.result},error:function(a,b,c){e=!1}}),e}}),atv.extend({getLoginId:function(){var a=this,b=a.getCookie("PdboxUser")||"";return!(!a.isLogin()||""===b)&&a.each(b.split("&"),function(a){if(/^(uid=)/.test(a))return a.replace(/^(uid=)/,"")})}}),atv.extend({getPdboxUserCookie:function(a){var b=this,c=b.getCookie("PdboxUser")||"",d=c.split("&"),e=0;return atv.each(d,function(b){var c=b.split("=");c[0]==a&&(e=c[1])}),e||0}}),atv.extend({getNewIcon:function(a){return a=a||!1,a?'<img src="'+AFREECA_AUTO+'/img/main_img/new.gif" alt="new">':""}}),atv.extend({setInit:function(a,b){if(!1===atv.contains(["addFav","delFav","showPop","Later"],a))return!1;atv.setCookie(a,b,DOMAIN,1)},getInit:function(a){return atv.getCookie(a,DOMAIN)},releaseInit:function(a){switch(a){case"addFav":var b=atv.getInit(a);if(null!=b){var c=b.split(":");c[0]==a&&c[1]==atv.getCookie("_au")&&(""!=c[3]?atv.addFavorite(c[2],c[3],c[4]):atv.addFavorite(c[2]),atv.setInit(a,"",DOMAIN,-1))}break;case"Later":var b=atv.getInit(a);if(null!=b){var d=b.split(":");d[0]==a&&d[1]==atv.getCookie("_au")&&(d.length>4?atv.addLaterView(d[2],d[3],c[4],c[5]):atv.addLaterView(d[2],d[3]),atv.setInit(a,"",DOMAIN,-1))}}}}),atv.extend({addFavorite:function(szUserId,callback,callbackParam){var self=this,ticket=self.getCookie("_au");return 0==self.isLogin()?(void 0!=callback||""!=callback?self.setInit("addFav","addFav:"+ticket+":"+szUserId+":"+callback+":"+callbackParam,DOMAIN,1):self.setInit("addFav","addFav:"+ticket+":"+szUserId,DOMAIN,1),self.goLogin(),!1):szUserId==self.getLoginId()?(alert("자신을 즐겨찾기 할 수 없습니다."),!1):($.ajaxSettings.traditional=!0,void $.ajax({type:"GET",url:FAV_8057+"/afreeca/favorite_api.php",data:{szWork:"ADD",szBjId:self.getLoginId(),favorite:szUserId},async:!1,dataType:"jsonp",jsonp:"callback",beforeSend:function(a){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8")},success:function(response){if($("#message_favorite_add_success").length>0)if(1==response.RESULT){var Object={},szMessage=doT.template($("#message_favorite_add_success").html())(Object);alert(szMessage)}else if(-5==response.RESULT){var Object={},szMessage=doT.template($("#message_favorite_already").html())(Object);alert(szMessage)}else if(-11==response.RESULT){var Object={},szMessage=doT.template($("#message_favorite_max_over").html())(Object);alert(szMessage)}else{var Object={},szMessage=doT.template($("#message_api_call_fail").html())(Object);alert(szMessage)}else alert(response.MSG);if(1==response.RESULT&&callback)try{eval(callback+"('"+callbackParam+"', '"+szUserId+"')")}catch(a){}},error:function(a,b,c){}}))},delFavorite:function(szUserId,callback,callbackParam){var self=this;if(0==self.isLogin())return alert("즐겨찾기 삭제를 위하여 로그인 해주세요"),!1;$.ajaxSettings.traditional=!0,$.ajax({type:"POST",url:FAV_8057+"/afreeca/favorite_api.php",data:{szWork:"DEL",szBjId:self.getLoginId(),favorite:szUserId},async:!1,dataType:"jsonp",jsonp:"callback",beforeSend:function(a){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8")},success:function(response){if(alert(response.MSG),callback)try{eval(callback+"('"+callbackParam+"', '"+szUserId+"')")}catch(a){}},error:function(a,b,c){}})},chkFavorite:function(a,b,c,d){var e=this;if(!e.isLogin())return atv.member.ict(a,b,c,d,!1),!0;$.ajaxSettings.traditional=!0,$.ajax({type:"GET",url:FAV_8057+"/afreeca/favorite_api.php",data:{szWork:"CHK",szBjId:e.getLoginId(),favorite:b},async:!1,dataType:"jsonp",jsonp:"callback",beforeSend:function(a){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8")},success:function(e){return-5==e.RESULT?(atv.member.ict(a,b,c,d,!0),!0):(atv.member.ict(a,b,c,d,!1),!0)},error:function(a,b,c){}})}}),atv.extend({addLaterView:function(szType,broadno,callback,callbackParam){var self=this,ticket=self.getCookie("_au");if(0==self.isLogin())return void 0!=callback||""!=callback?self.setInit("Later","Later:"+ticket+":"+type+":"+broadno+":"+callback+":"+callbackParam,DOMAIN,1):self.setInit("Later","Later:"+ticket+":"+type+":"+broadno,DOMAIN,1),self.goLogin(),!1;$.ajaxSettings.traditional=!0,$.ajax({type:"GET",url:VOD_DOMAIN+"/api/later_view_api.php",data:{szWork:"ADD",szVodType:szType,nTitleNo:broadno},async:!1,dataType:"jsonp",jsonp:"callback",beforeSend:function(a){a.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8")},success:function(response){if($("#message_later_add_success").length>0){if(1==response.RESULT){var Object={},szMessage=doT.template($("#message_later_add_success").html())(Object);return void(confirm(szMessage.replace("<br>","\n"))&&(top.document.location.href=VOD_DOMAIN+"/LATER"))}if(-2==response.RESULT){var Object={},szMessage=doT.template($("#message_later_add_fail").html())(Object);alert(szMessage)}else{var Object={},szMessage=doT.template($("#message_api_call_fail").html())(Object);alert(szMessage)}}else alert(response.MSG);if(1==response.RESULT&&callback)try{eval(callback+"('"+callbackParam+"', '"+szUserId+"')")}catch(a){}},error:function(a,b,c){}})}}),atv.extend({goStation:function(a){var b=this,c=AFREECA_ISAPI,a=a||!1;if(0==a&&0==b.isLogin())return b.goLogin(),!1;0==a&&1==b.isLogin()&&(a=b.getLoginId()),top.location.href=c+a}}),atv.extend({goLogin:function(){var a=!(1>arguments.length),b=a?arguments[0]:top.document.location.href,c=a?arguments[1]||"full":"full";/(#)+(.*)$/.test(b)&&(b=b.replace(RegExp.lastMatch,"")),top.location.href=LOGIN_8100+"/afreeca/login.php?szFrom="+c+"&request_uri="+encodeURIComponent(b)},goLogout:function(){var a=1>arguments.length?top.document.location.href:arguments[0];/(#)+(.*)$/.test(a)&&(a=a.replace(RegExp.lastMatch,"")),top.location.href=LOGIN_8100+"/app/LogOut.php?request_uri="+encodeURIComponent(a)},goAdultLogin:function(){var a=top.document.location.href;/(#)+(.*)$/.test(a)&&(a=a.replace(RegExp.lastMatch,"")),top.location.href=LOGIN_8100+"/afreeca/login.php?szFrom=adult&request_uri="+encodeURIComponent(a)}}),atv.extend({sendNote:function(a){window.open(NOTE_8133+"/app/index.php?page=write&id_list="+a,"noteWriteWindow","left=10,top=10,width=400,height=440,marginwidth=0,marginheight=0,resizable=0,scrollbars=no").focus()},goNoteHome:function(){top.location.href=atv.sprintf("%s/app/index.php",NOTE_8133)}}),void 0===window.afreeca&&(window.afreeca=atv),atv}),define("service/plugins/advertise",["afreeca"],function(a){var b=a.$,c=function(){this.leftbanner="http://www.afreecatv.com/data/main/main_leftwing_banner_list.json",this.playerarea="http://www.afreecatv.com/data/main/main_viewingup_banner_list.json"};return c.prototype.printLeftBanner=function(c){var d=b(c),e="";b.getJSON(this.leftbanner).done(function(c){var f=c.DATA||[],g=+new Date/1e3;b.each(f,function(b,c){var d=c.start_date,f=c.end_date;a.toTimestamp(d)<=g&&g<=a.toTimestamp(f)&&(e+='<a href=#><img src="'+c.img_path+'" alt="'+c.memo+'" title="'+c.memo+'"></a>')}),d.empty().append(e)})},c.prototype.printPlayerAreaBanner=function(c){var d=b(c);b.getJSON(this.playerarea).done(function(c){var e=c.DATA||[],f="",g=+new Date/1e3;b.each(e,function(b,c){var d=c.start_date,e=c.end_date;a.toTimestamp(d)<=g&&g<=a.toTimestamp(e)&&(f+='<a href=#><img src="'+c.img_path+'" alt="'+c.memo+'" title="'+c.memo+'"></a>')}),d.empty().append("<div class=mr_banner>"+f+"</div>")})},requirejs(["utils/afreeca/afreeca.front.main.advertise.js"]),a.extend({advertise:new c})}),define("service/plugins/broadsort",["afreeca"],function(a){var b=(a.$,{sortByViewCnt:function(a,b){var c=Number(a.total_view_cnt),d=Number(b.total_view_cnt);return c>d?-1:c<d?1:0},sortByRank:function(a,b){var c=Number(a.rank),d=Number(b.rank);return c<d?-1:c>d?1:0},sortByBroadStart:function(a,b){var c=String(a.broad_start),d=String(b.broad_start);return c>d?-1:c<d?1:0},sortByBroadBps:function(a,b){var c=Number(a.broad_bps),d=Number(b.broad_bps);return c>d?-1:c<d?1:0},sortByBroadResolution:function(a,b){var c=String(a.broad_resolution).split("x"),d=String(b.broad_resolution).split("x"),e=Number(c[0])*Number(c[1]),f=Number(d[0])*Number(d[1]);return e>f?-1:e<f?1:0},sortByOrderNo:function(a,b){var c=Number(a.order_no),d=Number(b.order_no);return c<d?-1:c>d?1:0}});return a.extend(b),b}),define("service/plugins/member.api",["atv","constant"],function(a){return{getNoteInfo:function(){return a.sprintf("%s/api/note_cnt_api.php?szType=json&szBeforeCallBack=_mynote&callback=_mynote",NOTE_8133)},getRealName:function(){var b="_isRealName";return a.sprintf("%s/app/chk_real_name.php?szWork=CHK_UID&szReturnType=jsonp&szCallback=%s&callback=%s",MEMBER_8111,b,b)},getFavInfo:function(b){return a.sprintf("%s/afreeca/favorite_api.php?szWork=SELECTBOX&szScriptVar=oFavoriteList&szBjId=%s&callback=%s",FAV_8057,b,"oFavoriteList")},getFavoriteWithLive:function(b){return a.sprintf("%s/afreeca/favorite_list_api.php?szFrom=%s&szClub=y&nFixBroadCnt=%d&szPlatformType=%s&callback=?",FAV_8057,b.log||"webk",b.limit||20,b.platform||"")},getBestBj:function(b){var c="_bestbj";return a.sprintf("%s/api/best_bj_action.php?szAction=ChkBestBJ&szType=json&szBeforeCallBack=%s&callback=%s&uid=%s",LIVE_8057,c,c,b)},getBigfanInfo:function(b){var c="_bigfan";return a.sprintf("%s/api/best_bj_action.php?szAction=GetBestBJDetail&szType=json&uid=%s&szBeforeCallBack=%s&callback=%s",LIVE_8057,b,c,c)},getAllSupporter:function(b){var c="_supporter";return a.sprintf("%s/api/best_bj_action.php?szAction=GetSupporter&szType=json&uid=%s&szBeforeCallBack=%s&callback=%s",LIVE_8057,b,c,c)},getGiftBalloon:function(b){return a.sprintf("%s/app/gift_starballoon.php?szBjId=%s",ST_SSL,b)},getGiftSticker:function(b){return a.sprintf("%s/app/send_fanletter.cgi?szBjId=%s",LIVE_8079,b)},getGiftChoco:function(b){return a.sprintf("%s/choco/index.php?ctrl=choco_user_app_controller&func=view_gift_choco_for_pc&szBjId=%s",ITEM_80,b)},getUserMenu:function(){return a.sprintf("%s/app/show_menu.php",LIVE_8079)},getStationInfo:function(b){return a.sprintf("%s/api/get_station_status.php?szBjId=%s&callback=%s",LIVE_8079,b,"_isStation")}}}),define("service/plugins/member",["afreeca","service/plugins/member.api"],function(a,b){function c(a,b){f.loadJs({url:a,charset:"euc-kr",complete:b||g})}function d(b,c,d){var e={url:b,charset:"euc-kr",complete:c||g};e=a.merge(e,d||{}),f.ajax(e)}var e=a.$,f=a.loader,g=function(){},h={bBindReady:!1};return a.merge(h,{getNoteCnt:function(d){return 0!=a.isLogin()&&(c(b.getNoteInfo(),d),!0)}}),a.merge(h,{getFavorite:function(d){return 0!=a.isLogin()&&(c(b.getFavInfo(a.getLoginId()),d),!0)},getFavoriteWithLive:function(d,e){return 0!=a.isLogin()&&(c(b.getFavoriteWithLive(d),e),!0)}}),a.merge(h,{isBestBj:function(a,d){return c(b.getBestBj(a),d)},getBigfan:function(a,d){return c(b.getBigfanInfo(a),d)},getSupporter:function(a,d){return c(b.getAllSupporter(a),d)}}),a.merge(h,{getBalloonUrl:function(a){return b.getGiftBalloon(a)},getStickerUrl:function(a){return b.getGiftSticker(a)},getChocoUrl:function(a){return b.getGiftChoco(a)}}),a.merge(h,{getUserMenu:function(a,c){return d(b.getUserMenu(),c,a)}}),a.merge(h,{getRealName:function(a){return c(b.getRealName(),a)}}),a.merge(h,{ict:function(b,c,d,f,g,h){var i="",j=this,k=b.currentTarget||b.srcElement,l=e(k).offset().left,m=e(k).offset().top+e(k).height();switch(f=f||"main",l=l<=0?void 0==b.offsetX?b.layerX:b.offsetX:l,m=m<=0?void 0==b.offsetY?b.layerY+5+e(document).scrollTop():b.offsetY+5+e(document).scrollTop():m,1>e("#contextMenu").length&&e("body").append('<div id="contextMenu" style="position:absolute;display: block;z-index:10000;"></div>'),i+='<div class="ictBox">',i+="\t<dl>",i+="\t<dt>"+c+"</dt>",f){case"list":""!=c&&(i+='\t\t<dd class="userid"><a href="javascript:afreeca.front.util.board.useridSearch(\''+c+"');\">아이디로 검색</a></dd>"),""!=d&&(i+='\t\t<dd class="nick"><a href="javascript:afreeca.front.util.board.nickSearch(\''+d+"');\">닉네임으로 검색</a></dd>"),c!=a.getLoginId()&&(i+='\t\t<dd class="memos"><a href="javascript:;" onclick="javascript:atv.sendNote(\''+c+"');\">쪽지보내기</a></dd>");break;case"view":c!=a.getLoginId()&&(i+='\t\t<dd class="memos"><a href="javascript:;" onclick="javascript:atv.sendNote(\''+c+"');\">쪽지보내기</a></dd>");break;case"main":default:i+=g?'\t\t<dd><a href="javascript:;" onclick="javascript:atv.delFavorite(\''+c+"', '"+h+'\');"><em class="ic_fav"></em>즐겨찾기 삭제</a></dd>':'\t\t<dd><a href="javascript:;" onclick="javascript:atv.addFavorite(\''+c+"', '"+h+'\');"><em class="ic_fav"></em>즐겨찾기 추가</a></dd>'}i+="</dl>",i+='<a href="'+AFREECA_ISAPI+c+'" target="_blank" class="btn_home"><span>방송국</span></a>',i+="</div>",e("#contextMenu").empty().append(i),e("body").width()<e("div#contextMenu").width()+l&&(l=e("body").width()-e("div#contextMenu").width()),e("#contextMenu").css({display:"block",left:l,top:m}),0==j.bBindReady&&(e("#contextMenu").on("mouseleave",function(){e("#contextMenu").css({display:"none"})}),j.bBindReady=!0)}}),a.merge(h,{getStationInfo:function(a,d){return c(b.getStationInfo(a),d)}}),a.extend({member:h})}),define("service/plugins/player",["afreeca"],function(a){var b=function(){this.id="afreeca player",this.tmRunPlayer=!1,this.nAvoidPlayerLimitTime=5,this.szLocalUrl="http://127.0.0.1:21201"};return b.prototype.checkPluginInstall=function(){var a=0,b=null;try{b="WIN32"==navigator.platform.toUpperCase()?new ActiveXObject("AFCSTARTER.AFCStarterCtrl.1"):new ActiveXObject("AFCStarter64.AFCStarter64Ctrl.1")}catch(a){}for(var c=navigator.plugins,d=0;d<c.length;d++)c[d].name.indexOf("AFCStarter")>-1&&(a=1);return b&&(a=1),a},b.prototype.isRunPlayer=function(){if(this.tmRunPlayer){var a=(new Date).getTime();if(1e3*this.nAvoidPlayerLimitTime>a-this.tmRunPlayer)return alert("플레이어 실행 중입니다. 잠시만 기다려 주십시오."),!1}return this.tmRunPlayer=(new Date).getTime(),!0},b.prototype.under14Agree=function(a){if(a=void 0===a?"":a,1==atv.getPdboxUserCookie("name_chk")&&0==atv.getPdboxUserCookie("broad_name_chk")){var b,c;return"ja_JP"==a?(b="14歳未満の場合、配信をするために法定代理人(保護者)の同意\nが必要です。\n次の段階で同意を得てください。",c="法定代理人(保護者)の同意を得てない場合配信できません。\n利用同意方法及び関連お問い合わせは\n(韓国)1688-7022(平日午前9時～午後6時)\nまでお願いします。"):(b="만 14세 미만 회원의 경우 방송을 진행하시려면\n반드시 법정대리인(보호자)의 동의가 필요합니다.\n인증을 진행하시겠습니까?",c="법정대리인(보호자)의 이용동의를 받지 않은 경우 방송을 하실 수 없습니다.\n이용 동의 방법 및 관련 문의사항은\n고객센터 : 1688-7022 (평일 오전 9시~오후 6시)\nyouth@afreecatv.com\n으로 문의 부탁드립니다."),confirm(b)?window.open(MEMBER_NONE_SCHEME+"/app/pop_verify_broad_child.php","popup","width=755, height=710, scrollbars=yes"):alert(c),!1}return!0},b.prototype.runStudio=function(b){if(0==a.isLoginAllow())return b=b||!1,b&&a.goLogin(),!1;if(0==this.under14Agree())return!1;if(0==this.isRunPlayer())return!1;var c={nCaption:2,szCookie:"PdboxTicket="+atv.getCookie("PdboxTicket")+"; PdboxUser="+encodeURIComponent(atv.getCookie("PdboxUser"))+"; PdboxBbs="+atv.getCookie("PdboxBbs")+"; isBbs="+atv.getCookie("isBbs")+"; _au="+atv.getCookie("_au")+"; OAX="+atv.getCookie("OAX")+";"};this.loadApp(c)},b.prototype.runJpStudio=function(b){if(0==a.isLoginAllow())return b=b||!1,b&&a.goLogin(),!1;if(0==this.under14Agree("ja_JP"))return!1;if(0==this.isRunPlayer())return!1;var c={nCaption:3,szCookie:"PdboxTicket="+atv.getCookie("PdboxTicket")+"; PdboxUser="+encodeURIComponent(atv.getCookie("PdboxUser"))+"; PdboxBbs="+atv.getCookie("PdboxBbs")+"; isBbs="+atv.getCookie("isBbs")+"; _au="+atv.getCookie("_au")+"; OAX="+atv.getCookie("OAX")+";"};this.loadApp(c)},b.prototype.runNewStudio=function(b){if(0==a.isLoginAllow())return b=b||!1,b&&a.goLogin(),!1;if(0==this.under14Agree())return!1;if(0==this.isRunPlayer())return!1;var c={nCaption:4,szCookie:"PdboxTicket="+atv.getCookie("PdboxTicket")+"; PdboxUser="+encodeURIComponent(atv.getCookie("PdboxUser"))+"; PdboxBbs="+atv.getCookie("PdboxBbs")+"; isBbs="+atv.getCookie("isBbs")+"; _au="+atv.getCookie("_au")+"; OAX="+atv.getCookie("OAX")+";"};this.loadApp(c)},b.prototype.runAvaPlayer=function(b){if(0==a.isLoginAllow())return a.goLogin(),!1;if(void 0==b&&0==this.isRunPlayer())return!1;var c={nCaption:9,szCookie:"PdboxTicket="+atv.getCookie("PdboxTicket")+"; PdboxUser="+encodeURIComponent(atv.getCookie("PdboxUser"))+"; PdboxBbs="+atv.getCookie("PdboxBbs")+"; isBbs="+atv.getCookie("isBbs")+"; _au="+atv.getCookie("_au")+"; OAX="+atv.getCookie("OAX")+";"};this.loadApp(c)},b.prototype.runSetupPlayer=function(b){if(0==a.isLoginAllow()){var c=new Date;c.setDate(c.getDate()-1),a.setCookie("PdboxTicket","",DOMAIN)}if(0==this.isRunPlayer())return!1;var d={nCaption:1,szCookie:"PdboxTicket="+atv.getCookie("PdboxTicket")+"; PdboxUser="+encodeURIComponent(atv.getCookie("PdboxUser"))+"; PdboxBbs="+atv.getCookie("PdboxBbs")+"; isBbs="+atv.getCookie("isBbs")+"; _au="+atv.getCookie("_au")+"; OAX="+atv.getCookie("OAX")+";"};"object"==typeof b&&(d=$.extend({},b,d)),this.loadApp(d)},b.prototype.runWebPlayer=function(b,c,d){try{if(0==this.isRunPlayer())return!1;var e=PLAY_80;if(null!=b&&void 0!==b&&""!=b)e=PLAY_80+"/"+b,null!=c&&void 0!=c&&""!=c&&(e=PLAY_80+"/"+b+"/"+c),top.location.href=e;else{if(-1!=navigator.userAgent.indexOf("Chrome"))return void(top.location.href=AFREECA+"/?hash=all");a.newPopup(PLAYER_80,"newPlayer")}}catch(a){return!1}},b.prototype.runBasecamp=function(){if(0==a.isLoginAllow())return a.goLogin(),!1;if(0==this.isRunPlayer())return!1;var b={nCaption:7,szCookie:"PdboxTicket="+atv.getCookie("PdboxTicket")+"; PdboxUser="+encodeURIComponent(atv.getCookie("PdboxUser"))+"; PdboxBbs="+atv.getCookie("PdboxBbs")+"; isBbs="+atv.getCookie("isBbs")+"; _au="+atv.getCookie("_au")+"; OAX="+atv.getCookie("OAX")+";"};this.loadApp(b)},b.prototype.run=function(a,b){try{switch(b=b||"",a){case"cast":return this.runStudio();case"app_player":var c=b.replace(b.replace(/^(.*?)(search_keyword%3d)/gi,""),""),d=b.replace(/^(.*?)(search_keyword%3d)/gi,"");return b=""!=c?"&szEtc="+c+unescape(d):"&szEtc="+escape(b),this.runSetupPlayer(b);default:return this.runWebPlayer()}}catch(a){return"error"}},b.prototype.loadApp=function(a){var b=this,c="";if(1==a.nCaption?c=AFUPD1_NONE_SCHEME+"/afreeca_installer_p.exe":4==a.nCaption?c=AFUPD1_NONE_SCHEME+"/afreeca_installer_s2.exe":9==a.nCaption?c=AFUPD1_NONE_SCHEME+"/afreeca_installer_a.exe":3==a.nCaption?(c=AFUPD1_JAPAN_NONE_SCHEME+"/afreeca_installer_s.exe",a.nCaption=2):c=7==a.nCaption?AFUPD1_NONE_SCHEME+"/afreeca_installer_b.exe":AFUPD1_NONE_SCHEME+"/afreeca_installer_s.exe",a.szCookie){var d=a.szCookie.split("; ");$.each(d,function(a,b){var c=b.split("=");if("PdboxTicket"==c[0]){if(!c[1]||"null"==c[1])return!1;$.ajax({type:"POST",url:"https://login.afreecatv.com/app/cookieallowchg.php",data:{PdboxTicket:c[1]},async:!1,success:function(a){c[1]=a}})}d[a]=c[0]+"="+c[1]}),a.szCookie=d.join("; ")}if("https:"==document.location.protocol){var e="location=no, directories=no,resizable=no,status=no,";return e+="toolbar=no,menubar=no, width=1,height=1,left=0, top=0, scrollbars=no",void window.open("http:"+RES_AFREECA_NONE_SCHEME+"/player.html?nCaption="+a.nCaption,"popup_player_"+a.nCaption,e)}if(-1!=navigator.userAgent.indexOf("MSIE 7.0"))return void $.ajax({type:"GET",url:this.szLocalUrl+"/?_="+(new Date).getTime()+"&callback=?",dataType:"jsonp",data:a,async:!0,success:function(c){if(c.code<0){var d="잠시 후 다시 시도해보시기 바랍니다.";switch(c.code){case-3:d="아프리카 운영원칙 위반으로 서비스 이용이 정지 되었습니다.\n정지기간 중 주민등록번호 도용 등을 통한 허위아이디 생성으로 동일한 위반행위를\n하실경우, 제재조치와는 별도로 관련법에 의거 법적인 처벌을 받을 수 있습니다."}alert(d)}1==c.update&&9==a.nCaption&&setTimeout(function(){b.runAvaPlayer(1)},3e3)},error:function(a,b,d){window.open(c,"_self")}});var f,g=this.szLocalUrl+"/?_="+(new Date).getTime()+"&";for(key in a)"szCookie"==key&&(a[key]=encodeURIComponent(a[key])),g+=key+"="+a[key]+"&";if(window.XDomainRequest)f=new XDomainRequest,f.timeout=1e4,f.ontimeout=function(){window.open(c,"_self")},f.onerror=function(){window.open(c,"_self")},f.onload=function(){var c=$.parseJSON(f.responseText);if(c.code<0){var d="잠시 후 다시 시도해보시기 바랍니다.";switch(c.code){case-3:d="아프리카 운영원칙 위반으로 서비스 이용이 정지 되었습니다.\n정지기간 중 주민등록번호 도용 등을 통한 허위아이디 생성으로 동일한 위반행위를\n하실경우, 제재조치와는 별도로 관련법에 의거 법적인 처벌을 받을 수 있습니다."}alert(d)}1==c.update&&9==a.nCaption&&setTimeout(function(){b.runAvaPlayer(1)},3e3)},f.onprogress=function(){},f.open("GET",g);else{if(!window.XMLHttpRequest)return;f=new XMLHttpRequest,f.onreadystatechange=function(){if(f.readyState==XMLHttpRequest.DONE)if(200==f.status){var d=$.parseJSON(f.responseText);if(d.code<0){var e="잠시 후 다시 시도해보시기 바랍니다.";switch(d.code){case-3:e="아프리카 운영원칙 위반으로 서비스 이용이 정지 되었습니다.\n정지기간 중 주민등록번호 도용 등을 통한 허위아이디 생성으로 동일한 위반행위를\n하실경우, 제재조치와는 별도로 관련법에 의거 법적인 처벌을 받을 수 있습니다."}alert(e)}1==d.update&&9==a.nCaption&&setTimeout(function(){b.runAvaPlayer(1)},3e3)}else window.open(c,"_self")},f.open("GET",g,!0)}f.send()},a.extend({player:new b})}),define("service/plugins/scroll",["afreeca"],function(a){var b=a.$,c={scrollTop:function(a){b(document).on("click",a,function(){pos=b(window).scrollTop(),b("body").css({"margin-top":-pos+"px","overflow-y":"scroll"}),b(window).scrollTop(0),b("body").css("transition","all 1s ease"),b("body").css("margin-top","0"),b("body").on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(){b("body").css("transition","none")})})},scrollTo:function(a,c,d){if(void 0==c&&(c=500),!(0>c)){var e="number"==typeof a?a:b(a).offset().top,f=this,g=e-b(window).scrollTop(),h=g/c*10,i=d||function(){};this.scrollTimer=setTimeout(function(){isNaN(parseInt(h,10))?setTimeout(function(){i()},50):(window.scrollTo(0,b(window).scrollTop()+h),f.scrollTo(a,c-10,i))}.bind(this),10)}}};return a.extend(c),c}),define("service/plugins/search",["afreeca"],function(a){var b=a.$,c={szDelim:String.fromCharCode(12),oDom:null,nIndex:null,szCurrentKeyword:"",szSType:"di",recommendSearchKey:function(){atv.loader.loadJs({url:AFREECA+"/data/af_recommend_search_utf8.js",charset:"utf-8",complete:function(a){if(void 0!=oRecommendSearchJson&&1==oRecommendSearchJson.RESULT){Math.floor(Math.random()*oRecommendSearchJson.LISTS.length)}}})},setKeywordCookie:function(a){var c=this,d="";if(""!=a&&"undefined"!=a&&null!=a){if(d=atv.getCookie("_csk"),null==d&&(d=""),""!=(d=unescape(d))){var e=d.split(c.szDelim);b.each(e,function(b,c){c==a&&e.splice(b,1)});d=new Array(a).concat(e).join(c.szDelim)}else d=a;atv.setCookie("_csk",d,DOMAIN)}},delKeywordCookie:function(a){var c=this,d=atv.getCookie("_csk");if(null==d&&(d=""),""!=(d=unescape(d))){var e=d.split(c.szDelim);b.each(e,function(b,c){c==a&&e.splice(b,1)});d=(new Array).concat(e).join(c.szDelim)}if(d==c.szDelim||""==d)return d="",void c.delAllKeywordCookie();atv.setCookie("_csk",d,DOMAIN),c.setNoneLayerSearch()},delAllKeywordCookie:function(){var a=this,b=new Date;b.setDate(b.getDate()-1),atv.setCookie("_csk","",DOMAIN,b),a.setNoneLayerSearch()},setClickPage:function(c){var d=this;if(d.szCurrentKeyword=c,""==c)if(null==a.getCookie("_csk")||""==a.getCookie("_csk")){var e=SEARCH_SCKETC_80+"/api.php",f="hotKeyword";b.ajax({type:"POST",dataType:"jsonp",jsonp:"callback",url:e,cache:!1,data:{m:f,v:"1.0",c:"UTF-8"},success:function(a){var c="",e=[],f="",g="-";void 0!==a&&0!=a.length&&(e.push('<div class="inner_area">'),e.push("\t<h3>실시간 인기 검색어</h3>"),e.push('\t<ul class="list">'),b(a.HOT).each(function(a,b){"new"==b.show_text?(f="new",g="NEW"):"up"==b.updown?(f="up",g="<em></em>"+b.show_text):"down"==b.updown&&(f="down",g="<em></em>"+b.show_text),e.push('\t<li><a href="javascript:;" data="'+b.keyword+'"><em class="num">'+(a+1)+"</em>"+b.keyword+'<span class="rank '+f+'">'+g+"</span></a></li>")}),e.push("\t</ul>"),e.push("</div>")),c=e.join(""),""!=c?(b("div.search_box").html(c).show(),d.oDom=b("div.search_box"),d.szSType="rc",b("div.search_box ul li a").off("click").on("click",function(){b("#szKeyword").val(b(this).attr("data")),d.getBanKeyword(b("#szKeyword").val(),"total","sv",d.szSType)})):(b("div.search_box").hide(),d.oDom=null)},error:function(a,b,c){}})}else{var g=atv.getCookie("_csk");null==g&&(g="");var h="",i=[];if(""==(g=unescape(g)))return;var j=g.split(this.szDelim);i.push('<div class="inner_area">'),i.push("\t<h3>최근 검색어</h3>"),i.push('\t<ul class="list">'),b.each(j,function(a,b){a>=10||""!=b&&(b=b.replace(/\"/g,"&quot;"),b=b.replace(/\'/g,"&#39;"),i.push('<li><a href="javascript:;" data="'+b+'">'+b+'<button class="btn_delete" data="'+b+'"><span>삭제</span></button></a></li>'))}),i.push("\t</ul>"),i.push('\t<div class="ct_area"><button class="btn_all_delete">전체삭제</button></div>'),i.push("</div>"),h=i.join(""),""!=h?(b("div.search_box").html(h).show(),d.oDom=b("div.search_box"),d.szSType="di",b("div.search_box ul li a").off("click").on("click",function(){b("#szKeyword").val(b(this).attr("data")),d.getBanKeyword(b(this).attr("data"),"total","sv",d.szSType)}),b("div.search_box ul li button.btn_delete").off("click").on("click",function(){return d.delKeywordCookie(b(this).attr("data")),d.setClickPage(b("input#szKeyword").val()),b("body").attr("show_flag","true"),!1}),b("div.search_box button.btn_all_delete").off("click").on("click",function(){d.delAllKeywordCookie()})):(b("div.search_box").hide(),d.oDom=null)}else{var e=SEARCH_SCKETC_80+"/api.php",f="autoJaso",k=void 0!==document.charset?document.charset.toUpperCase():document.characterSet.toUpperCase();null!=k&&void 0!==k||(k="UTF-8"),b.ajax({type:"POST",dataType:"jsonp",jsonp:"callback",url:e,cache:!1,data:{m:f,v:"1.0",t:"json ",c:k,d:encodeURIComponent(c),n:10,w:"flash1"},success:function(a){if(1==a.ret){var c="",e=[],f=0;if(void 0!==a.list){e.push('<div class="inner_area">'),e.push('\t<h3 class="blind">검색어 자동완성</h3>'),e.push('\t<ul class="list">');for(var g=0;g<a.list.length;g++)void 0!==a.list[g].d&&(e.push('<li><a href="javascript:;" data="'+a.list[g].d+'">'+a.list[g].d+"</a></li>"),f++);e.push("\t</ul>"),e.push("</div>")}c=e.join(""),f>0?(b("div.search_box").html(c).show(),d.oDom=b("div.search_box"),d.szSType="ac",b("div.search_box ul li a").off("click").on("click",function(){b("#szKeyword").val(b(this).attr("data")),d.getBanKeyword(b("#szKeyword").val(),"total","sv",d.szSType)})):(b("div.search_box").hide(),d.oDom=null)}},error:function(a,b,c){}})}b("body").off("click").on("click",function(a){"true"==b("body").attr("show_flag")&&b("body").removeAttr("show_flag")})},changeKeyword:function(a){var c=this;if(null!=c.oDom){if(null==c.nIndex||c.oDom.find("ul li").length==c.nIndex)c.oDom.show(),38==a?c.nIndex=c.oDom.find("ul li").length-1:40==a&&(c.nIndex=0);else if(38==a){if(0==c.nIndex)return b("#szKeyword").val(c.szCurrentKeyword),c.oDom.hide(),void(c.nIndex=null);c.nIndex--}else if(40==a){if(c.oDom.find("ul li").length-1==c.nIndex)return b("#szKeyword").val(c.szCurrentKeyword),c.oDom.hide(),void c.nIndex++;c.nIndex++}c.oDom.find("ul li").css("background-color","#FFFFFF"),c.oDom.find("ul li:eq("+c.nIndex+")").css("background-color","#f1f3f6"),b("#szKeyword").val(c.oDom.find("ul li:eq("+c.nIndex+") a").attr("data"))}},getBanKeyword:function(d,e,f,g,h){var i=SEARCH_SCKETC_80+"/api.php";b.ajax({type:"GET",dataType:"jsonp",jsonp:"callback",url:i,cache:!1,data:{m:"stopWord",v:"1.0",d:encodeURIComponent(d),t:"json",c:"UTF-8",w:"flash1",uid:a.getLoginId(),acttype:e,ut:f,stype:g},success:function(a,b){0==a.isstop?c.submitKeyword(g,d):alert("입력하신 검색어 ‘"+d+"’는(은) 금칙어입니다."),c.setNoneLayerSearch()},error:function(a,b,c){}})},setNoneLayerSearch:function(){var a=this;a.oDom=null,a.nIndex=null,a.szSType="di",b("div.search_box").html("").hide()},submitKeyword:function(a,b){this.setKeywordCookie(b);var c=document.oSearchForm;c.acceptCharset="utf-8",c.szKeywordhidden.value=encodeURIComponent(c.szKeyword.value),c.szStype.value=a,c.submit()}};return c}),define("service/plugins/thumb",["afreeca"],function(a){var b={},c=a.$;return a.merge(b,{getInframe24:function(a,b){return'<span class=rbox><img src="http://www.afreecatv.com/images/main_new/img_rbox.png" class=png24></span><img src="'+a+'" onerror="this.src=\''+b+"'\" width=97 height=78>"}}),a.merge(b,{viewBlowUp:function(a){var b=this;c(a).on("click","img",function(){b.readyBlowUp(),b.loadImageToBlowUp(c(this).attr("real")||c(this).attr("src"))})},readyBlowUp:function(){1>c("div#blowup-outer").length&&(c("body").prepend('<div id="blowup-outer" style="margin:0 auto;position:fixed;display:none;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#Bf000000, endColorstr=#Bf000000); z-Index:99999;color:#fff;text-align:center;vertical-align:middle"><div id="blowUp" style="margin:0 auto;position:relative;width:100%;text-align:center;">loading...</div></div>'),c("div#blowup-outer").on("click",function(){c(this).css({display:"none"})}))},loadImageToBlowUp:function(a){var b=new Image,d=c("div#blowUp");b.onload=function(){var b=this;setTimeout(function(){var e,f,g=Math.round(c(window).height()-100),h=Math.round(c(window).width()-100),i=5,j=b.width+i,k=b.height;j>h&&(e=h/j,j=h,k=Math.round(k*e)),k>g&&(e=g/k,k=g,j=Math.round(j*e)),f=c(window).height()/2-k/2;var l='<div style="margin:0 auto;color:#000;padding:'+i+'px;background:rgb(255,255,255);"><img src="'+a+'" style="filter:alpha(opacity=100);width:'+j+"px;height:"+k+'px;"><p></div><span style="line-height:25px;font-weight:bold;">아무곳이나 클릭하면 사라집니다. <span style="cursor:pointer;display:inline-block;">[X]</span> </span>';d.empty().css({top:f}).append(l)},100)},d.empty().append('<img src="//static.afreecatv.com/asset/images/loading.gif">').parent().css({display:"block"}),b.src=a}}),a.merge(b,{tmLast:!1,nShowTime:300,bBindReady:!1,create:function(a,b,d){var e=this,f=a.clientX+c(document).scrollLeft(),g=a.clientY+c(document).scrollTop();e.tmLast=(new Date).getTime(),1>c("div#box").length&&(c("body").append('<div id=box style="position:absolute"><img src="" onerror="this.src=\''+d+"'\"></div>"),c("div#box").css({display:"absolute",border:"2px solid #ccc"})),c("div#box").css({display:"block",top:g,left:f,zIndex:999}),c("div#box img").attr({src:b}).css({width:152,height:112})},preview:function(a,b){var d=this;c(a).on("mouseover mousemove","img",function(a){c(this).attr("src");d.create(a,c(this).attr("src"),b)}),c(a).on("mouseleave","img",function(){c("div#box").css({display:"none"})})}}),a.extend({thumb:b})}),define("service/plugins/tutorial",["afreeca"],function(a){var b=function(){this.option="height=560, width=756, toolbar=no,menubar=no,location=no, top=250, left=250"};return b.prototype.openTutorial=function(){return a.newPopup(AFREECA+"/tutorial/tutorial_down.html","tutorial",this.option)},b.prototype.openDownload=function(){return a.newPopup(AFREECA+"/tutorial/tutorial_down.html","tutorial",this.option)},a.extend({tutorial:new b})});